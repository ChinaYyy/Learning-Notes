# shell
:toc:

## sh 执行方式

1. `vim hello.sh`
+
----
#!/bin/bash
#The first program
#author:yyy
echo -e "hello world!"
----
2. `chmod 755 hello.sh`
3. `./hello.sh` 或 `bash hello.sh`


## 快捷键

- `ctrl+L` 清屏，相当于 `clear`
- `ctrl+U` 删除或剪切光标之前的命令
- `ctrl+Y` 粘贴
- `ctrl+S` 暂停屏幕输出
- `ctrl+Q` 恢复屏幕输出

## 输出重定向

.标准输出重写向
- `命令 > 文件` 以**覆盖**的形式重写向到文件中
- `命令 >> 文件` 以**追加**的形式重写向到文件中

.标准错误输出重写向
- `命令 2> 文件` 以**覆盖**的形式重写向到文件中
- `命令 2>> 文件` 以**追加**的形式重写向到文件中

.正确输出和错误输出同时保存
- `命令 &> 文件` 或 `命令 > 文件 2>&1`
- `命令 &>> 文件` 或 `命令 >> 文件 2>&1`
- `命令 >> 文件1 2>>文件2` 正确和错误输出分别保存

.丢弃输出
----
&> /dev/null
----

## 连接多个命令

- `;` 错误的命令不影响后面的命令
- `&&` 前面命令错误，后面命令不执行
- `||` 前面命令错误，后面命令才执行

----
命令 && echo "yes" || echo "no"
----

.管道符
----
命令1 | 命令2  //命令1的正确输出作为命令2的操作对象
----

### 特殊符号

image::../images/specical_symbol.png[]

## commands
### echo
- `-e` 支持反斜线控制的字符转换

### dos2unix
将windows编写的脚本转换为unix格式

解决不能识别 `^M$`

### history

- `-c` 清空历史命令
- `-w` 将缓存的历史命令写入历史命令保存文件。默认： `~/.bash_history`

.历史命令的调用
- 上下箭头调用以前的历史命令
- `!n` 重复执行第n条历史命令
- `!!` 重复执行上一条命令
- `!字串` 重复执行最后一条以该字串开头的命令

### alias

----
alias vi='vim'
alias               //查询命令别名
----

.命令执行顺序
----
1. 第一顺位是绝对路径或相对路径执行的命令
2. 第二顺位是别名命令
3. 第三顺位是bash内部命令
4. 第四顺位是$PATH环境变量定义的目录查找顺序找到的第一个命令
----

NOTE: 永久生效写入 `.bashrc` 文件

.删除别名
----
unalias 别名
----

### wc

- `-l` 统计行数

----
wc -l < 文件
----

### grep

- `-i` 忽略大小写
- `-n` 显示行号
- `-v` 反向查找
- `--color=auto` 找到的关键字颜色显示

