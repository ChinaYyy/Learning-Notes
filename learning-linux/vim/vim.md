# Vim

打开文件

- `vim +#` 打开vim， 使光标处在第#行
- `vim +` 最后一行
- `vim +/PATTERN` 第一次被模式匹配的那一行

模式转换

编辑 --> 输入

- `i` 当前光标所在字符前面
- `a` 后面
- `o` 下方新建一行

- `I` 行首
- `A` 行尾
- `I` 上方新建一行

输入 --> 编辑

`ESC`

末行模式

- `:!` 执行命令
- `:w !sudo tee %` 忘记sudo命令打开编辑文件

## 移动光标

逐字符移动

- `hjkl` 左下上右
- `#h` 移动#个字符

单词移动

- `w` 下一个单词词首
- `e` 下一个单词词尾
- `b` 前一个单词词首
- `#w` 跳#个单词

行内跳转

- `0` 绝对行首
- `^` 行首的非空白字符
- `$` 绝对行尾

行间跳转

- `#G` 中转到#行
- `G` 最后一行
- `:#`

删除字符

- `x` 删除光标所在处的单个字符
- `#x` 所在处及向后的#个字符
- `d{跳转命令}`, 比如 `dw`, `d3w`, `d0`, `d$`
- `dd` 删除当前所在行
- `#dd` 当前行在内向下#行
- `:2,5d` 删除2-5行， `.,+5d`当前行开始到向下的5行

复制

`y` 同 `d`

`c` 删除并进入编辑模式, 同d， `cc`, `c$`

`r` 替换单个字符, `R`进入替换模式

## 撤销

`u`

`ctrl+r` 撤销最近的一次撤销操作(还原)

## 重复前一次的编辑操作

`.`

## 翻屏

- `ctrl+f` 向下翻屏
- `ctrl+b` 向下翻屏
- `ctrl+d` 向下翻半屏
- `ctrl+u` 向下翻半屏

## 可视化模式

`v`

## 查找

- `/PATTERN` 从当前位置向行尾查找
- `?PATTERN` 向上查找

`n` 下一个， `N`上一个

`.,$-1s@he@HE@gi` 查找并替换， 在vim中可以使用`%`指定全文查找并替换

## 编辑多个文件

`vim FILE1 FILE2 FILE3`

- `:next`
- `:prev`
- `:first`
- `:last`

分屏显示

`ctrl+w s` 水平拆分
`ctrl+w v` 垂直拆分

`:qa` 退出所有文件

分窗口打开多个文件

- `vim -o` 水平分割显示
- `vim -O` 垂直分割显示

## 与sheel交互

`:!`

## 高级

- `:set nu`, `:set nonu` 行号
- `:set autoindent`, `:set ai`, `set noai` 缩进
- `:syntax on`, `:syntax off` 语法高亮

## 配置文件

`/etc/vimrc`, `~/.vimrc`
